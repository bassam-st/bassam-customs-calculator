<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Ø¨Ø³Ø§Ù… Ù…Ø³Ø§Ø¹Ø¯Ùƒ Ø§Ù„Ø¬Ù…Ø±ÙƒÙŠ</title>

  <link rel="manifest" href="/manifest.json">
  <meta name="theme-color" content="#16a34a">
  <link rel="icon" href="/icons/icon-192.png">

  <style>
    :root{--green:#16a34a;--green2:#22c55e;--ink:#0f172a;--muted:#64748b;--card:#fff;--bg:#f1f5f9;--accent:#2563eb}
    *{box-sizing:border-box}
    body{margin:0;background:var(--bg);font-family:'Noto Kufi Arabic',system-ui,sans-serif;color:var(--ink)}
    .wrap{max-width:720px;margin:16px auto;padding:12px}
    .hero{background:linear-gradient(135deg,var(--green),var(--green2));color:#fff;border-radius:24px;padding:22px 18px;position:relative;box-shadow:0 10px 30px rgba(22,163,74,.18)}
    .brand{display:flex;align-items:center;justify-content:space-between;gap:12px}
    .brand h1{margin:0;font-size:22px;line-height:1.35}
    .badge{background:#fff;border:2px solid #fff;color:#064e3b;width:64px;height:64px;display:grid;place-items:center;border-radius:18px;font-weight:800;font-size:22px}
    .phone{margin-top:6px;opacity:.95;font-size:14px}
    .nav{display:flex;gap:8px;flex-wrap:wrap;margin:10px 0 0}
    .nav a{background:#e2e8f0;color:#0f172a;text-decoration:none;padding:8px 12px;border-radius:10px;font-weight:700}
    .card{background:var(--card);border-radius:18px;padding:16px;margin-top:16px;box-shadow:0 8px 24px rgba(0,0,0,.06);border:1px solid #e5e7eb}
    label{display:block;font-weight:700;margin-bottom:6px}
    input[type="number"]{width:100%;padding:14px 16px;border:1px solid #cbd5e1;border-radius:14px;font-size:18px;background:#fff;outline:none}
    .group-title{margin:16px 0 8px;font-weight:700;color:#334155}
    .rates{display:flex;flex-direction:column;gap:12px}
    .pill{display:flex;align-items:center;justify-content:space-between;gap:10px;padding:14px;border-radius:999px;border:2px solid #cbead9;background:#f0fdf4;cursor:pointer}
    .pill input{appearance:none;width:22px;height:22px;border:2px solid #84d1b0;border-radius:50%;margin:0}
    .pill.active{background:#14532d;color:#fff;border-color:#14532d}
    .pill.active input{border-color:#fff;box-shadow:inset 0 0 0 6px #fff;background:#fff}
    .hint{font-size:13px;color:#0f5132;opacity:.9}
    .result{border:2px dashed #cbd5e1;border-radius:18px;padding:18px;background:#f8fafc;margin-top:8px;text-align:center}
    .result .big{font-size:42px;font-weight:900;color:#065f46;letter-spacing:1px}
    .result .mini{margin-top:8px;color:var(--muted)}
    .actions{display:flex;gap:10px;flex-wrap:wrap;justify-content:center;margin-top:16px}
    .btn{border:none;border-radius:12px;padding:10px 14px;font-weight:800;cursor:pointer}
    .btn.copy{background:#22c55e;color:#fff}
    .btn.pdf{background:var(--accent);color:#fff}
    .btn.wa{background:#16a34a;color:#fff}
    @media (max-width:420px){ .result .big{font-size:36px} }

    /* ğŸ”½ Ø²Ø± Ø§Ù„ØªØ«Ø¨ÙŠØª */
    #installBox{position:fixed;bottom:20px;right:20px;left:20px;
      background:#16a34a;color:#fff;padding:14px 18px;
      border-radius:14px;display:none;justify-content:space-between;align-items:center;
      box-shadow:0 8px 24px rgba(0,0,0,.2);font-family:'Noto Kufi Arabic',system-ui,sans-serif;
      z-index:9999;animation:fadeIn .5s ease}
    #installBox button{background:#fff;color:#16a34a;font-weight:800;
      border:none;border-radius:10px;padding:10px 14px;cursor:pointer}
    @keyframes fadeIn{from{opacity:0;transform:translateY(20px)}to{opacity:1;transform:translateY(0)}}
  </style>

  <!-- ØªØ³Ø¬ÙŠÙ„ Service Worker -->
  <script>if('serviceWorker'in navigator){navigator.serviceWorker.register('/sw.js').catch(()=>{});}</script>
</head>
<body>
  <div class="wrap">
    <section class="hero">
      <div class="brand">
        <h1>Ø¨Ø³Ø§Ù… Ù…Ø³Ø§Ø¹Ø¯Ùƒ Ø§Ù„Ø¬Ù…Ø±ÙƒÙŠ</h1>
        <div class="badge">ğŸ’¼</div>
      </div>
      <div class="phone">Ù„Ù„Ø§Ø³ØªÙØ³Ø§Ø± ÙˆØ®Ø¯Ù…Ø§Øª Ø§Ù„ØªØ®Ù„ÙŠØµ: <b>â€+967771997809</b></div>
      <div class="nav">
        <a href="./prices.html">ğŸ’² Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø£Ø³Ø¹Ø§Ø±</a>
        <a href="./hs.html">ğŸ” Ø§Ù„Ø¨Ù†ÙˆØ¯ Ø§Ù„Ø¬Ù…Ø±ÙƒÙŠØ©</a>
      </div>
    </section>

    <section class="card">
      <label for="usd">Ù‚ÙŠÙ…Ø© Ø§Ù„Ø³Ù„Ø¹Ø© (Ø¨Ø§Ù„Ø¯ÙˆÙ„Ø§Ø± USD)</label>
      <input id="usd" type="number" inputmode="decimal" placeholder="Ù…Ø«Ø§Ù„: 2000" />

      <div class="group-title">Ø§Ø®ØªØ± Ø§Ù„ÙØ¦Ø© Ø§Ù„Ø¬Ù…Ø±ÙƒÙŠØ©</div>
      <div class="rates">
        <label class="pill" id="pill5"><div><b>5%</b> <span class="hint">(ÙØ¦Ø© Ø®Ù…Ø³Ø© Ø¨Ø§Ù„Ù…Ø¦Ø©)</span></div><input type="radio" name="rate" value="0.2075"></label>
        <label class="pill active" id="pill10"><div><b>10%</b> <span class="hint">(ÙØ¦Ø© Ø¹Ø´Ø±Ø© Ø¨Ø§Ù„Ù…Ø¦Ø©)</span></div><input type="radio" name="rate" value="0.265" checked></label>
      </div>

      <div class="group-title">Ø§Ù„Ø±Ø³ÙˆÙ… Ø§Ù„Ø¬Ù…Ø±ÙƒÙŠØ© (Ø±ÙŠØ§Ù„ ÙŠÙ…Ù†ÙŠ)</div>
      <div class="result">
        <div class="big" id="out">0</div>
        <div class="mini" id="formula">0 Ã— 750 Ã— 0 = 0</div>
      </div>

      <div class="actions">
        <button class="btn pdf"  onclick="window.print()">Ø·Ø¨Ø§Ø¹Ø© / Ø­ÙØ¸ PDF</button>
        <button class="btn copy" onclick="copyResult()">Ù†Ø³Ø® Ø§Ù„Ù†ØªÙŠØ¬Ø©</button>
        <button class="btn wa"   onclick="shareWhatsApp()">Ù…Ø´Ø§Ø±ÙƒØ© ÙˆØ§ØªØ³Ø§Ø¨</button>
      </div>
    </section>
  </div>

  <!-- ğŸ”½ Ø²Ø± Ø§Ù„ØªØ«Ø¨ÙŠØª -->
  <div id="installBox">
    <span id="installMsg">â¬‡ï¸ Ù‚Ù… Ø¨ØªØ«Ø¨ÙŠØª ØªØ·Ø¨ÙŠÙ‚ Ø¨Ø³Ù‘Ø§Ù… Ø§Ù„Ø¬Ù…Ø±ÙƒÙŠ Ù„Ù„ÙˆØµÙˆÙ„ Ø§Ù„Ø³Ø±ÙŠØ¹</span>
    <button id="installBtn">ØªØ«Ø¨ÙŠØª</button>
  </div>

  <script src="./main.js"></script>

  <!-- ğŸ“² Ù…Ù†Ø·Ù‚ Ø§Ù„ØªØ«Ø¨ÙŠØª -->
  <script>
  let deferredPrompt;
  const box=document.getElementById("installBox"),btn=document.getElementById("installBtn"),msg=document.getElementById("installMsg");

  window.addEventListener('beforeinstallprompt',(e)=>{
    e.preventDefault();
    deferredPrompt=e;
    box.style.display="flex";
  });

  btn.addEventListener("click",async()=>{
    if(!deferredPrompt) return;
    deferredPrompt.prompt();
    const { outcome } = await deferredPrompt.userChoice;
    if(outcome==="accepted"){
      msg.textContent="âœ… ØªÙ… ØªØ«Ø¨ÙŠØª Ø§Ù„ØªØ·Ø¨ÙŠÙ‚ Ø¨Ù†Ø¬Ø§Ø­!";
      setTimeout(()=>box.remove(),2500);
    }else{
      msg.textContent="â„¹ï¸ ÙŠÙ…ÙƒÙ†Ùƒ Ø§Ù„ØªØ«Ø¨ÙŠØª Ù„Ø§Ø­Ù‚Ù‹Ø§ Ù…Ù† Ø´Ø±ÙŠØ· Ø§Ù„Ø¹Ù†ÙˆØ§Ù†.";
    }
    deferredPrompt=null;
  });

  // Ø¯Ø¹Ù… iPhone
  if(/iphone|ipad|ipod/i.test(navigator.userAgent)){
    setTimeout(()=>{
      box.style.display="flex";
      msg.textContent="ğŸ“± Ù„Ø¥Ø¶Ø§ÙØ© Ø§Ù„ØªØ·Ø¨ÙŠÙ‚ Ø¹Ù„Ù‰ iPhone: Ø§Ø¶ØºØ· 'Ù…Ø´Ø§Ø±ÙƒØ©' Ø«Ù… 'Ø£Ø¶Ù Ø¥Ù„Ù‰ Ø§Ù„Ø´Ø§Ø´Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©'";
      btn.style.display="none";
    },1500);
  }

  window.addEventListener("appinstalled",()=>{box.style.display="none";});
  </script>

  <!-- ğŸ“Š ØªØªØ¨Ù‘Ø¹ Bassam Tracker -->
  <script src="https://bassam-tracker.onrender.com/assets/tracker.js"></script>
</body>
</html>

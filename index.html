<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Ø¨Ø³Ø§Ù… Ø§Ù„Ø´ØªÙŠÙ…ÙŠ Ù„Ù„ØªØ®Ù„ÙŠØµ Ø§Ù„Ø¬Ù…Ø±ÙƒÙŠ â€“ Ø­Ø§Ø³Ø¨Ø© Ø§Ù„Ø±Ø³ÙˆÙ…</title>
  <meta name="theme-color" content="#16a34a">
  <style>
    :root{
      --bg:#f1f5f9; --card:#ffffff; --text:#0f172a; --muted:#475569;
      --border:#e5e7eb; --accent:#16a34a; --accent-2:#22c55e; --ink:#062;
    }
    *{box-sizing:border-box}
    body{margin:0;background:var(--bg);color:var(--text);font-family:'Noto Kufi Arabic',system-ui,sans-serif}
    .header{background:linear-gradient(90deg,var(--accent),var(--accent-2));color:#fff;text-align:center;padding:18px 12px;border-bottom:4px solid #0f5132}
    .header h1{margin:0;font-size:20px;letter-spacing:.2px}
    .header p{margin:6px 0 0;font-size:13px;opacity:.95}
    .wrap{max-width:720px;margin:18px auto;padding:0 12px}
    .nav{display:flex;gap:8px;flex-wrap:wrap;margin-bottom:12px}
    .nav a{background:#e2e8f0;color:#0f172a;text-decoration:none;padding:10px 14px;border-radius:10px;font-weight:700;border:1px solid var(--border)}
    .card{background:var(--card);border:1px solid var(--border);border-radius:16px;box-shadow:0 8px 24px rgba(0,0,0,.06);padding:16px}
    label{display:block;margin-top:10px;font-weight:700;color:var(--text)}
    input,textarea{width:100%;padding:12px;border:1px solid var(--border);border-radius:12px;background:#fff;font-size:16px;color:var(--text)}
    textarea{min-height:84px}
    .rate-box{display:flex;gap:10px;margin-top:10px;flex-wrap:wrap}
    .rate-btn{padding:10px 14px;border-radius:12px;border:2px solid #94a3b8;cursor:pointer;font-weight:800;background:#fff}
    .rate-btn.active{background:var(--accent);color:#fff;border-color:var(--accent)}
    .result{margin-top:14px;text-align:center}
    .result .num{font-size:32px;font-weight:900;color:var(--ink)}
    .muted{color:var(--muted);font-size:12px}
    .actions{display:flex;gap:8px;flex-wrap:wrap;justify-content:center;margin-top:12px}
    .btn{border:none;border-radius:12px;padding:12px 14px;font-weight:800;cursor:pointer}
    .btn-gray{background:#e2e8f0;color:#0f172a}
    .btn-green{background:var(--accent);color:#fff}
    .btn-blue{background:#2563eb;color:#fff}
    .row{display:grid;grid-template-columns:1fr 1fr;gap:12px}
    @media(max-width:640px){.row{grid-template-columns:1fr}}
    .hint{margin-top:10px}
    .formula{font-family:ui-monospace, SFMono-Regular, Menlo, monospace; font-size:13px}
    .footer{margin-top:10px;text-align:center}
    .badge{display:inline-block;background:#ecfeff;border:1px solid #a5f3fc;color:#155e75;border-radius:999px;padding:2px 8px;font-size:12px;margin-inline-start:6px}
  </style>
</head>
<body>
  <div class="header">
    <h1>Ø¨Ø³Ø§Ù… Ø§Ù„Ø´ØªÙŠÙ…ÙŠ Ù„Ù„ØªØ®Ù„ÙŠØµ Ø§Ù„Ø¬Ù…Ø±ÙƒÙŠ</h1>
    <p>Ù„Ù„Ø§Ø³ØªÙØ³Ø§Ø± ÙˆØ®Ø¯Ù…Ø§Øª Ø§Ù„ØªØ®Ù„ÙŠØµ: 00967771997809</p>
  </div>

  <div class="wrap">
    <div class="nav">
      <a href="./prices.html">ğŸ’² Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø£Ø³Ø¹Ø§Ø±</a>
      <a href="./hs.html">ğŸ” Ø§Ù„Ø¨Ù†ÙˆØ¯ Ø§Ù„Ø¬Ù…Ø±ÙƒÙŠØ©</a>
    </div>

    <div class="card">
      <div class="row">
        <div>
          <label>Ø§Ø³Ù… Ø§Ù„ØµÙ†Ù</label>
          <input id="itemName" placeholder="Ù…Ø«Ø§Ù„: Ø¨Ø·Ø§Ø·Ø³ Ù…Ø¬Ù…Ø¯Ø© / Ø´Ø¨Ùƒ Ø­Ø¯ÙŠØ¯ / Ø¯Ø±ÙŠÙ„ ÙƒÙ‡Ø±Ø¨Ø§Ø¦ÙŠ" />
        </div>
        <div>
          <label>Ù‚ÙŠÙ…Ø© Ø§Ù„Ø³Ù„Ø¹Ø© (Ø¨Ø§Ù„Ø¯ÙˆÙ„Ø§Ø± USD)</label>
          <input id="usd" type="number" inputmode="decimal" placeholder="Ù…Ø«Ø§Ù„: 2000" />
        </div>
      </div>

      <!-- Ø³Ø¹Ø± Ø§Ù„ØµØ±Ù Ø«Ø§Ø¨Øª 750 ÙˆÙ…Ø®ÙÙŠ Ù„Ù„Ø¢Ù† -->
      <input id="fx" type="hidden" value="750" />

      <label style="margin-top:14px;">Ø§Ø®ØªØ± Ø§Ù„ÙØ¦Ø© Ø§Ù„Ø¬Ù…Ø±ÙƒÙŠØ© <span class="badge">5% = 0.2075</span> <span class="badge">10% = 0.265</span></label>
      <div class="rate-box" id="rateBox">
        <button class="rate-btn active" data-rate="0.2075">5% (0.2075)</button>
        <button class="rate-btn" data-rate="0.265">10% (0.265)</button>
        <button class="rate-btn" data-rate="custom">Ù…Ø®ØµØµ</button>
        <input id="customRate" type="number" inputmode="decimal" step="0.0001" placeholder="Ù…Ø¹Ø§Ù…Ù„ Ù…Ø®ØµØµ" style="display:none;min-width:160px" />
      </div>

      <div class="result">
        <div class="num" id="result">0</div>
        <div class="muted formula" id="formula">â€”</div>
      </div>

      <div class="row" style="margin-top:10px">
        <div>
          <label>Ù…Ù„Ø§Ø­Ø¸Ø§Øª</label>
          <textarea id="notes" placeholder="Ø§ÙƒØªØ¨ Ø£ÙŠ Ù…Ù„Ø§Ø­Ø¸Ø©: Ø§Ù„Ø¨Ù†Ø¯ / Ù…ØµØ¯Ø± Ø§Ù„Ø³Ø¹Ø± / Ø±Ù‚Ù… Ø§Ù„ÙØ§ØªÙˆØ±Ø©â€¦"></textarea>
        </div>
        <div>
          <label>Ù…Ø®ØªØµØ±</label>
          <textarea id="summary" readonly placeholder="Ø³ÙŠØ¸Ù‡Ø± Ù‡Ù†Ø§ Ù…Ù„Ø®Øµ Ù‚Ø§Ø¨Ù„ Ù„Ù„Ù†Ø³Ø®â€¦"></textarea>
        </div>
      </div>

      <div class="actions">
        <button class="btn btn-gray" id="copyBtn">Ù†Ø³Ø® Ø§Ù„Ù…Ù„Ø®Øµ</button>
        <button class="btn btn-green" id="waBtn">Ù…Ø´Ø§Ø±ÙƒØ© ÙˆØ§ØªØ³Ø§Ø¨</button>
        <button class="btn btn-blue" onclick="window.print()">Ø·Ø¨Ø§Ø¹Ø© / Ø­ÙØ¸ PDF</button>
      </div>

      <div class="hint muted">
        Ø§Ù„Ù…Ø¹Ø§Ø¯Ù„Ø©: <b>Ø§Ù„Ø±Ø³ÙˆÙ… = Ù‚ÙŠÙ…Ø© Ø§Ù„Ø³Ù„Ø¹Ø© Ã— 750 Ã— Ù…Ø¹Ø§Ù…Ù„ Ø§Ù„ÙØ¦Ø©</b><br>
        Ù…Ø«Ø§Ù„: 2000 Ã— 750 Ã— 0.2075 = 311,250 Ø±ÙŠØ§Ù„.
      </div>
    </div>
  </div>

  <script>
    const $ = s=>document.querySelector(s);
    const usd = $('#usd');
    const fx = $('#fx');
    const result = $('#result');
    const formula = $('#formula');
    const notes = $('#notes');
    const summary = $('#summary');
    const nameEl = $('#itemName');
    const rateBox = $('#rateBox');
    const customRate = $('#customRate');
    const copyBtn = $('#copyBtn');
    const waBtn = $('#waBtn');

    let rate = 0.2075;

    function activeRate(){
      const btn = rateBox.querySelector('.rate-btn.active');
      if(!btn) return 0.2075;
      if(btn.dataset.rate === 'custom'){
        const v = parseFloat(customRate.value||'0');
        return (isFinite(v) && v>0) ? v : 0;
      }
      return parseFloat(btn.dataset.rate);
    }

    function fmt(n){
      return new Intl.NumberFormat('ar-YE',{maximumFractionDigits:2}).format(n||0);
    }

    function recalc(){
      const value = parseFloat(usd.value||'0');
      const r = activeRate();
      const res = value * 750 * (isFinite(r)?r:0);
      result.textContent = fmt(res);
      formula.textContent = `${value||0} Ã— 750 Ã— ${isFinite(r)&&r>0 ? r : 'â€”'}`;

      const lines = [
        `Ø§Ù„ØµÙ†Ù: ${nameEl.value||'-'}`,
        `Ø§Ù„Ù‚ÙŠÙ…Ø© (USD): ${value||0}`,
        `Ø§Ù„Ù…Ø¹Ø§Ù…Ù„: ${isFinite(r)&&r>0 ? r : '-'}`,
        `Ø§Ù„Ø±Ø³ÙˆÙ…: ${fmt(res)} Ø±ÙŠØ§Ù„`,
        `Ù…Ù„Ø§Ø­Ø¸Ø§Øª: ${notes.value||''}`
      ];
      summary.value = lines.join('\n');
    }

    // ØªØ¨Ø¯ÙŠÙ„ Ø§Ù„Ø£Ø²Ø±Ø§Ø±
    rateBox.addEventListener('click', (e)=>{
      const btn = e.target.closest('.rate-btn'); if(!btn) return;
      rateBox.querySelectorAll('.rate-btn').forEach(b=>b.classList.remove('active'));
      btn.classList.add('active');
      const isCustom = btn.dataset.rate === 'custom';
      customRate.style.display = isCustom ? 'inline-block' : 'none';
      recalc();
    });
    customRate.addEventListener('input', recalc);

    [usd, nameEl, notes].forEach(el=> el.addEventListener('input', recalc));
    usd.addEventListener('keydown', e=>{ if(e.key==='Enter'){ e.preventDefault(); recalc(); notes.focus(); } });

    copyBtn.addEventListener('click', async ()=>{
      try{ await navigator.clipboard.writeText(summary.value||''); alert('âœ” ØªÙ… Ù†Ø³Ø® Ø§Ù„Ù…Ù„Ø®Øµ'); }catch{}
    });

    waBtn.addEventListener('click', ()=>{
      const msg = `Ø­Ø§Ø³Ø¨Ø© Ø§Ù„Ø±Ø³ÙˆÙ… Ø§Ù„Ø¬Ù…Ø±ÙƒÙŠØ©:\n${summary.value||''}`;
      window.open(`https://wa.me/?text=${encodeURIComponent(msg)}`);
    });

    // Ù‚Ø±Ø§Ø¡Ø© Ø¨Ø§Ø±Ø§Ù…ØªØ±Ø§Øª Ø§Ù„Ø±Ø§Ø¨Ø· Ù…Ù† Ø§Ù„Ø£Ø³Ø¹Ø§Ø±/Ø§Ù„Ø¨Ù†ÙˆØ¯
    function applyQueryParams(){
      const sp = new URLSearchParams(location.search);
      if(sp.has('value')){
        const v = parseFloat(sp.get('value')); if(isFinite(v)) usd.value = v;
      }
      if(sp.has('name')){
        const n = decodeURIComponent(sp.get('name')||''); if(n){ nameEl.value = n; }
      }
      if(sp.has('hs')){
        const hs = decodeURIComponent(sp.get('hs')||''); if(hs){
          notes.value = (notes.value?notes.value+'\n':'') + 'Ø§Ù„Ø¨Ù†Ø¯: ' + hs;
        }
      }
    }

    // ØªÙ‡ÙŠØ¦Ø©
    applyQueryParams();
    recalc();
  </script>
</body>
</html>
